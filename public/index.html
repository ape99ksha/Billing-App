<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sanghamitra Bill</title>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background: #f5f5f5;
        }
        .bill-container {
            width: 650px;
            margin: 20px auto;
            padding: 30px;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            height: 80px;
            width: auto;
        }
        .header-text {
            flex-grow: 1;
        }
        .header h1 {
            margin: 0;
            color: #15196a;
        }
        .customer-info table {
            width: 100%;
            margin-bottom: 10px;
        }
        .customer-info td {
            padding: 8px;
            font-size: 16px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 16px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
            color: #003366;
        }
        th {
            background-color: #003366;
            color: #fff;
        }
        
        .total-amount {
            font-size: 18px;
            font-weight: bold;
            text-align: right;
            margin-bottom: 20px;
        }
        .buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        button {
            padding: 10px 20px;
            background-color: #56b423;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        input, select {
            padding: 8px;
            width: 95%;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 14px;
        }
        input:focus, select:focus {
            border-color: #007BFF;
        }
        .qr-container {
            display: none;
            text-align: center;
            margin-top: 20px;
        }
        .qr-container img {
            width: 120px;
            height: auto;
        }
        button:hover {
            background-color: #56b423;
        }
        #adminBtn {
            background-color: #56b423;
        }
        #adminBtn:hover {
            background-color: #56b423;
        }
        .footer {
            margin-top: 30px;
            font-size: 12px;
            color: #070707;
            text-align: center;
        }
        .delete-btn {
            background-color: lab(93.63% 2.52 1.43);
            color: rgb(227, 22, 22);
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .delete-btn:hover {
            background-color: #f5eded;
        }
        
        
        
    </style>
</head>
<body>
    <div class="bill-container">
        <div class="header">
            <h1>SANGHAMITRA BILL</h1>
            <img src="sanghamitra logo.jpeg" alt="Sanghamitra Logo" class="logo">
        </div>

        <div class="customer-info">
            <table>
                <tr>
                    <td><strong>Customer Name:</strong></td>
                    <td><input type="text" id="customerName" placeholder="Enter Customer Name"></td>
                </tr>
                <tr>
                    <td>Contact No:</td>
                    <td><input type="tel" id="mobileNumber" placeholder="Enter mobile Number"></td>
                </tr>
            </table>
        </div>

        <table id="productsTable">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Category</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Discount</th>
                    <th>Total</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <select class="product-select" onchange="updateCategories(this)">
                            <option value="">Select Product</option>
                            <option value="Bags">Bags</option>
                            <option value="Frames">Frames</option>
                            <option value="T-shirts">T-shirts</option>
                            <option value="Books">Books</option>
                            <option value="Mugs">Mugs</option>
                            <option value="Prints">Prints</option>
                        </select>
                    </td>
                    <td>
                        <select class="category-select">
                            <option value="">Select Category</option>
                        </select>
                    </td>
                    <td>
                        <input type="number" class="price-input" min="0" step="0.01">
                    </td>
                    <td>
                        <input type="number" class="quantity-input" min="1" value="1">
                    </td>
                    <td> 
                        <select class="discount-input">
                            <option value="0">%</option>
                            <option value="10">10%</option>
                            <option value="20">20%</option>
                            <option value="30">30%</option>
                            <option value="40">40%</option>
                            <option value="50">50%</option>
                        </select>
                    </td>
                    <td class="total-cell">0.00</td>
                    <td><button class="delete-btn" onclick="deleteRow(this)">×</button></td>
                </tr>
            </tbody>
        </table>

        <button id="addProductBtn">Add Product</button>

        <div class="payment-method">
            <p><strong>Payment Method:</strong></p>
            <select onchange="toggleQRCode(this)">
                <option>Cash</option>
                <option>Online</option>
            </select>
        </div>
        <div class="qr-container">
            <p><strong>Scan QR Code to Pay:</strong></p>
            <img src="qr-code.png" alt="QR Code">
        </div>

        <hr>

        <div class="total-amount">
            Total Amount: ₹<span id="grandTotal">0.00</span>
        </div>

        <div class="buttons">
            <button id="saveBillBtn">Save Bill</button>
            <button type="button" id="adminBtn" onclick="window.location.href='admin.html';">Go to Admin Page</a>
        </div>

        <div class="footer">
            <p>Sanghamitra Business Incubator<br>
                Website: <a href="https://sanghamitra.store" target="_blank">sanghamitra.store</a><br>
                Contact: +919234567890</p>
        </div>
    </div>

    <script>
        // Product categories data
        const productCategories = {
            "Bags": [
                "Black Rexin Bag", "Brown Rexin Bag", "Bottle Bag",
                "Blue Butterfly (Big Bag)", "Red Big Flower (Big Bag)",
                "Blue Butterfly (Small Bag)", "Red Big Flower (Small Bag)"
            ],
            "Frames": [
                "Adivasi Geographic by Jayesh Lakhama Vayeda",
                "Anti-caste Bookseller by Nidhin Shobhana",
                "Anti-Caste Movement is a Verb by Nidhin Shobhana",
                "Atta Deep Bhav by Buddhist Cultural Art",
                "Atta hi Attano Natho by Buddhist Cultural Art",
                "Attasila Samadanam by Buddhist Cultural Art",
                "Babasaheb and the Dhamma by Priyanka Rohan Patil",
                "Babasaheb by Sonali Meshram",
                "Babasaheb gave us the Path by Priyanka Rohan Patil",
                "Babasaheb, champion of women's rights by Priyanka Rohan Patil",
                "Beauty by Kshitij Mahendra",
                "Bhima Koregaon: Our War Cry!",
                "Buddha at the Jetavana by Priyanka Rohan Patil",
                "Buddha by Sonali Meshram",
                "Dhamek Stupa by Sushil Patil",
                "Dr. B. R. Ambedkar by Priyanka Rohan Patil",
                "Freedom by Kshitij Mahendra",
                "In Quest of Equality by The Shared Mirror"
            ],
            "T-shirts": [
                "Elephant", "Chameleon", "Lion Cub", "Lioness", 
                "Sitting Baby Wolf", "Wolf Standing"
            ],
            "Books": [
                "Cast & Class", "Ews", "Gujrati", 
                "In Quest of Equality by The Shared Mirror", 
                "Mahad", "Hatred In The Belly by The Shared Mirror", 
                "Bhima Koregaon", "The River Speaks", 
                "What Babasaheb Ambedkar Means", "Navayana Buddhism", 
                "A Dyslexic's Life", "Kanshi Ram Ji Ki Sohbat Mein", 
                "Mai Kanshi Ram Bol Raha Hu", "Savari"
            ],
            "Mugs": [
                "Elephant", "Chameleon", "Lion Cub", "Lioness", 
                "Sitting Baby Wolf", "Wolf Standing"
            ],
            "Prints": [
                "Adivasi Geographic by Jayesh Lakhama Vayeda",
                "Anti-caste Bookseller by Nidhin Shobhana",
                "Anti-Caste Movement is a Verb by Nidhin Shobhana",
                "Atta Deep Bhav by Buddhist Cultural Art",
                "Atta hi Attano Natho by Buddhist Cultural Art",
                "Attasila Samadanam by Buddhist Cultural Art",
                "Babasaheb and the Dhamma by Priyanka Rohan Patil",
                "Babasaheb by Sonali Meshram",
                "Babasaheb gave us the Path by Priyanka Rohan Patil",
                "Babasaheb, champion of women's rights by Priyanka Rohan Patil",
                "Beauty by Kshitij Mahendra",
                "Bhima Koregaon: Our War Cry!",
                "Buddha at the Jetavana by Priyanka Rohan Patil",
                "Buddha by Sonali Meshram",
                "Dhamek Stupa by Sushil Patil",
                "Dr. B. R. Ambedkar by Priyanka Rohan Patil",
                "Freedom by Kshitij Mahendra",
                "In Quest of Equality by The Shared Mirror"
            ]
        };

        // Update categories based on product selection
        function updateCategories(selectElement) {
            const product = selectElement.value;
            const row = selectElement.closest('tr');
            const categorySelect = row.querySelector('.category-select');
            
            // Clear existing options
            categorySelect.innerHTML = '<option value="">Select Category</option>';
            // Add new options if product is selected
            if (product && productCategories[product]) {
                productCategories[product].forEach(category => {
                    const option = document.createElement('option');
                    option.value = category;
                    option.textContent = category;
                    categorySelect.appendChild(option);
                });
            }
        }

        // Add product row
        document.getElementById('addProductBtn').addEventListener('click', function() {
            const tbody = document.querySelector('#productsTable tbody');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td>
                    <select class="product-select" onchange="updateCategories(this)">
                        <option value="">Select Product</option>
                        <option value="Bags">Bags</option>
                        <option value="Frames">Frames</option>
                        <option value="T-shirts">T-shirts</option>
                        <option value="Books">Books</option>
                        <option value="Mugs">Mugs</option>
                        <option value="Prints">Prints</option>
                    </select>
                </td>
                <td>
                    <select class="category-select">
                        <option value="">Select Category</option>
                    </select>
                </td>
                <td><input type="number" class="price-input" min="0" step="0.01"></td>
                <td><input type="number" class="quantity-input" min="1" value="1"></td>
                <td>
                    <select class="discount-input">
                        <option value="0">%</option>
                        <option value="10">10%</option>
                        <option value="20">20%</option>
                        <option value="30">30%</option>
                        <option value="40">40%</option>
                        <option value="50">50%</option>
                    </select>
                </td>
                <td class="total-cell">0.00</td>
                <td><button class="delete-btn" onclick="deleteRow(this)">×</button></td>
            `;
            tbody.appendChild(newRow);
            
            // Add event listeners to new inputs
            addInputListeners(newRow);
        });

        // Delete row
        function deleteRow(button) {
            const row = button.closest('tr');
            if (document.querySelectorAll('#productsTable tbody tr').length > 1) {
                row.remove();
                calculateGrandTotal();
            } else {
                alert("You must have at least one product row.");
            }
        }

        // Add event listeners to inputs for calculation
        function addInputListeners(row) {
            const priceInput = row.querySelector('.price-input');
            const quantityInput = row.querySelector('.quantity-input');
            const discountInput = row.querySelector('.discount-input');
            
            [priceInput, quantityInput].forEach(input => {
                input.addEventListener('input', function() {
                    calculateRowTotal(row);
                    calculateGrandTotal();
                });
            });
            // For select dropdown
            discountSelect.addEventListener('change', function() {
                calculateRowTotal(row);
                calculateGrandTotal();
            });
        }

        // Calculate row total
        function calculateRowTotal(row) {
            const price = parseFloat(row.querySelector('.price-input').value) || 0;
            const quantity = parseInt(row.querySelector('.quantity-input').value) || 0;
            const discount = parseFloat(row.querySelector('.discount-input').value) || 0;
            
            const subtotal = price * quantity;
            const discountedAmount = subtotal * (discount / 100);
            const total = subtotal - discountedAmount;
            
            row.querySelector('.total-cell').textContent = total.toFixed(2);
        }

        // Calculate grand total
        function calculateGrandTotal() {
            let grandTotal = 0;
            document.querySelectorAll('#productsTable tbody tr').forEach(row => {
                const totalText = row.querySelector('.total-cell').textContent;
                grandTotal += parseFloat(totalText) || 0;
            });
            
            document.getElementById('grandTotal').textContent = grandTotal.toFixed(2);
        }

        
        function toggleQRCode(paymentMethodSelect) {
            const qrContainer = document.querySelector(".qr-container");
            if (paymentMethodSelect.value === "Online") {
                qrContainer.style.display = "block";
            } else {
                qrContainer.style.display = "none";
            }
        }
        // Save bill function
        document.getElementById('saveBillBtn').addEventListener('click', function() {
            const customerName = document.getElementById('customerName').value;
            const paymentMethod = document.querySelector(".payment-method").value;
            
            const products = [];
            document.querySelectorAll('#productsTable tbody tr').forEach(row => {
                const product = row.querySelector('.product-select').value;
                const category = row.querySelector('.category-select').value;
                const price = parseFloat(row.querySelector('.price-input').value) || 0;
                const quantity = parseInt(row.querySelector('.quantity-input').value) || 0;
                const discount = parseFloat(row.querySelector('.discount-input').value) || 0;
                const total = parseFloat(row.querySelector('.total-cell').textContent) || 0;
                
                if (product && category) {
                    products.push({
                        product,
                        category,
                        price,
                        quantity,
                        discount,
                        total
                    });
                }
            });
            
            if (!customerName) {
                alert("Please enter customer name");
                return;
            }
            
            if (products.length === 0) {
                alert("Please add at least one product");
                return;
            }
            
            const totalAmount = parseFloat(document.getElementById('grandTotal').textContent) || 0;
            
            const billData = {
                customerName,
                products,
                totalAmount,
                paymentMethod
            };
            
            // Here you would typically send the data to your backend API
            console.log("Saving bill:", billData);
            
            // Example of what you would do with a real API:
             fetch('http://localhost:8080/api/', {
                 method: 'POST',
                 headers: {
                     'Content-Type': 'application/json',
                 },
                 body: JSON.stringify(billData)
             })
             .then(response => response.json())
             .then(data => {
                 console.log('Success:', data);
                 alert('Bill saved successfully!');
             })
             .catch((error) => {
                 console.error('Error:', error);
                 alert('Error saving bill');
             });
            
            // For demo purposes, we'll just show an alert
            alert('Bill data prepared.');
        });
    </script>
</body>
</html>
